<!doctype html>
<html>
 <head>
  <meta charset="UTF-8">
  <title>Document</title>
  <style>
    .ok{color:green;}
    .err{color:red;}
  </style>
 </head>
 <body>
  用户名:<input id="txtName"/><br>
  <span id="msgName"></span>
  <script src="../ajax.js"></script>
  <script>
    //其实,id属性值，自动就是一个全局变量
    //当每输入完一个字符后，自动执行
    txtName.onkeyup=function(){
      if(txtName.value!=""){
        ajax(
          "get",
          "data/valiName.php?uname="+txtName.value,
          "",
          "text"
        ).then(function(data){
            if(data=="true"){
              msgName.innerHTML="可用";
              msgName.className="ok";
            }else{
              msgName.innerHTML="已被占用";
              msgName.className="err";
            }
        })
      }else msgName.innerHTML="";
    }
  </script>
  <script>
    //var code="AdS6";
    //do{
      //var input=prompt("输入验证码:"+code);
      //if(input.toLowerCase()!=code.toLowerCase()){
        //alert("验证码错误，请重新输入!");
      //}else{
        //break;
      //}
    //}while(true);
    //document.write("验证通过!");
  </script>
 </body>
</html>
