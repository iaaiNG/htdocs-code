<template>
    <div>
        <!--banner-->
        <div class="index">
            <div id="box">
                <img src="../assets/images/banner/1.jpg">
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
            </div>

            <!--标题和小圆点指示器 -->
            <div class="bannerTxt">
                <p>广州市海目星激光科技有限公司</p>
                <div class="indicator">
                    <a href="" class="cur"></a>
                    <a href=""></a>
                    <a href=""></a>
                    <a href=""></a>
                    <a href=""></a>
                </div>
            </div>
        </div>

        <!--关于海目星-->
        <div id="f1" class="content">
            <div><img src="../assets/images/aboutus.png" alt="">&nbsp;&nbsp;<span>关于</span><span style="color: #023365">海目星</span></div>
            <div class="abouthmx">
                <div>
                    <video style="height: 400px" autoplay="autoplay" loop="loop" muted="true" controls="true">
                        <source src="http://v1.cecdn.yun300.cn/site_1704280156/海目星中文版长篇06141532913608962.mp4">
                    </video>
                </div>
                <div>
                    <h1>走进海目星</h1>
                    <p>海目星一直以来深耕激光和自动化领域，现已成为业界数一数二的激光&自
                        动化装备综合解决方案提供商，是国家级高新技术企业。产品和服务范围包
                        括：锂电自动化、风冷紫外激光设备、大型自动化生产线、大型激光切割设
                        备、蓝宝石切割设备、PCB打标设备等，不断为锂电、3C、钣金等行业客户
                        带来更高效、更优质的综合解决方案。</p>
                    <a href="">更多内容</a>
                </div>
            </div>
        </div>

        <!--产品与方案-->
        <div id="f2" class="content">
            <div><img src="../assets/images/pro.png" alt="">&nbsp;&nbsp;<span>产品</span><span style="color: #023365">与方案</span></div>
            <div class="pro">
                <div>
                    <div>
                        <div>
                            <img src="../assets/images/tubiao1.png" alt="">
                            <h4>动力电池智能制造解决方案</h4>
                            <p>
                                覆盖了从电芯配对到烘烤干燥整个动力电池生产过程，高速激光极耳切割机的成功应用，为锂电行业的智能发展带来了划时代的意义。
                            </p>
                            <a href="">查看详情</a>
                        </div>
                    </div>
                </div>
                <div>
                    <div>
                        <div>
                            <img src="../assets/images/tubiao2.png" alt="">
                            <h4>大功率激光切割解决方案</h4>
                            <p>
                                海目星大功率切割机，以高速度，高质量的形象在行业中得名，并配有自主知识产权的交互式平台，解决上下料时间差难题，大幅提高工作效率。
                            </p>
                            <a href="">查看详情</a>
                        </div>
                    </div>
                </div>
                <div>
                    <div>
                        <div>
                            <img src="../assets/images/tubiao3.png" alt="">
                            <h4>通用激光及自动化解决方案</h4>
                            <p>
                                激光与自动化完美结合，提供3C行业，电力行业，等领域解决方案。并配有自主知识产权的交互式平台，解决上下料时间差难题，大幅提高工作效率。
                            </p>
                            <a href="">查看详情</a>
                        </div>
                    </div>
                </div>
                <div>
                    <div>
                        <div>
                            <img src="../assets/images/tubiao4.png" alt="">
                            <h4>精密激光切割及焊接解决方案</h4>
                            <p>
                                海目星激光精密微加工系统，以高效率，高品质解决线路板、VCM等3C行业切割与焊接难题。并在蓝宝石、玻璃等脆性材料领域提供先进解决方案。
                            </p>
                            <a href="">查看详情</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!--合作伙伴-->
        <div id="f3" class="content">
            <div><img src="../assets/images/part.png" alt="">&nbsp;&nbsp;<span>合作</span><span style="color: #023365">伙伴</span></div>
            <hr>
            <div class="parts">
                <ul>
                    <li><img src="../assets/images/partners/1.jpg" alt=""></li>
                    <li><img src="../assets/images/partners/2.jpg" alt=""></li>
                    <li><img src="../assets/images/partners/3.jpg" alt=""></li>
                    <li><img src="../assets/images/partners/4.jpg" alt=""></li>
                    <li><img src="../assets/images/partners/5.jpg" alt=""></li>
                    <li><img src="../assets/images/partners/6.jpg" alt=""></li>
                    <li><img src="../assets/images/partners/7.jpg" alt=""></li>
                    <li><img src="../assets/images/partners/8.jpg" alt=""></li>
                    <li><img src="../assets/images/partners/9.jpg" alt=""></li>
                    <li><img src="../assets/images/partners/10.jpg" alt=""></li>
                    <li><img src="../assets/images/partners/11.jpg" alt=""></li>
                    <li><img src="../assets/images/partners/12.jpg" alt=""></li>
                    <li><img src="../assets/images/partners/13.jpg" alt=""></li>
                    <li><img src="../assets/images/partners/14.jpg" alt=""></li>
                    <li><img src="../assets/images/partners/15.jpg" alt=""></li>
                    <li><img src="../assets/images/partners/16.jpg" alt=""></li>
                    <li><img src="../assets/images/partners/17.jpg" alt=""></li>
                    <li><img src="../assets/images/partners/18.jpg" alt=""></li>
                    <li><img src="../assets/images/partners/19.png" alt=""></li>
                    <li><img src="../assets/images/partners/20.png" alt=""></li>
                    <li><img src="../assets/images/partners/21.png" alt=""></li>
                    <li><img src="../assets/images/partners/22.png" alt=""></li>
                    <li><img src="../assets/images/partners/23.png" alt=""></li>
                    <li><img src="../assets/images/partners/24.png" alt=""></li>
                    <li><img src="../assets/images/partners/25.png" alt=""></li>
                </ul>
            </div>
        </div>

        <!--电梯导航-->
        <div id="lift">
            <ul class="lift_list">
                <li class="lift_item">
                    <a href="javascript:" class="lift_btn">
                        <span class="lift_btn_txt">关于 <br>海目星</span>
                    </a>
                </li>
                <li class="lift_item">
                    <a href="javascript:" class="lift_btn">
                        <span class="lift_btn_txt">产品 <br>方案</span>
                    </a>
                </li>
                <li class="lift_item">
                    <a href="javascript:" class="lift_btn">
                        <span class="lift_btn_txt">合作 <br>伙伴</span>
                    </a>
                </li>
                <li class="lift_item">
                    <a href="javascript:" class="lift_btn">
                        <span class="lift_btn_txt">返回 <br>顶部</span>
                    </a>
                </li>
            </ul>
        </div>
    </div>
</template>

<script>
export default {
    name: "Index",
    data(){
        return {
            timer : null
        }
    },
    methods:{
        getTotalTop(elem) {
            var sum = 0;
            do {
                sum += elem.offsetTop;
                elem = elem.offsetParent;
            } while (elem);
            return sum + 140;
        },
         scrollApp(){
            var items = $("#lift .lift_item");
            var totalTop = this.getTotalTop($("#f1")[0]);
            var show = false;
            var scrollTop = document.documentElement.scrollTop; //屏幕滚动距离 ; innerHeight屏幕视口高度

            if (innerHeight / 2 + scrollTop >= totalTop) {
                $("#lift").show();
                show = true;
            } else {
                $("#lift").hide();
                show = false;
            }
            if (show) {
                for (var i = 0; i < 3; i++) {
                    var totalTop = this.getTotalTop($(`#f${i + 1}`)[0]);
                    if (totalTop <= innerHeight / 2 + scrollTop) {
                        for (let each of items) {
                            $(each).attr("class", "lift_item");
                        }
                        $(items[i]).addClass("lift_item_on");
                    }
                }
            }
        }
    },
    mounted() {
        this.timer = setInterval(shake, 3000);

        //产品与方案的鼠标 hover 动画效果
        var $pro = $(".pro>div");
        for (let each of $pro) {
            $(each).hover(
                () => {
                    $(each)
                        .find("img")
                        .css("margin-top", 0);
                    $(each)
                        .find("p")
                        .css("visibility", "visible");
                    $(each)
                        .find("a")
                        .css("visibility", "visible");
                    $(each)
                        .children()
                        .css("background", "rgba(10,50,90,0.7)");
                },
                () => {
                    $(each)
                        .find("img")
                        .css("margin-top", 140);
                    $(each)
                        .find("p")
                        .css("visibility", "hidden");
                    $(each)
                        .find("a")
                        .css("visibility", "hidden");
                    $(each)
                        .children()
                        .css("background", "none");
                }
            );
        }

        // 计算元素到页面顶部的距离
        var getTotalTopInset = ()=>{
            return this.getTotalTop
        }
        $(window).on("scroll",this.scrollApp);
        $("#lift").on("click", ".lift_item", function() {
            var index = parseInt($(this).index()) + 1;
            if (index != 4) {
                var totalTop = getTotalTopInset()($(`#f${index}`)[0]);
                $("body,html")
                    .stop(true)
                    .animate({ scrollTop: totalTop - 280 }, 500);
            } else {
                $("body,html")
                    .stop(true)
                    .animate({ scrollTop: 0 }, 500);
            }
        });

        // banner图片轮播效果实现
        var i = 1, canShake = true;
        function shake() {
            if (canShake == true) {
                canShake = false;
                if (i == 5) i = 1;
                else i++;

                var txt = [
                    "海目星激光智能装备（江苏）有限公司 ",
                    "深圳市海目星激光智能装备股份有限公司",
                    "广州市海目星激光科技有限公司",
                    "海目星（江门）激光智能装备有限公司 ",
                    "鞍山海目星科技有限公司"
                ];
                $(".indicator>a.cur").removeClass("cur");
                $(".indicator>a")
                    .eq(i - 1)
                    .addClass("cur");
                $(".bannerTxt>p").html(txt[i - 1]);

                var arr = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14];
                arr.sort((a, b) => (Math.random() < 0.5 ? 1 : -1));

                var j = 0;
                var timer1 = setInterval(() => {
                    if (j > 14) {
                        clearInterval(timer1);
                    } else {
                        $(`#box>div:eq(${arr[j++]})`)
                            .css(
                                "backgroundImage",
                                `url(${require(`../assets/images/banner/${i}.jpg`)})`
                            )
                            .addClass("shake");
                    }
                }, 50);
                setTimeout(() => {
                    $("#box>div").removeClass("shake");
                    $("#box>img").attr("src",require(`../assets/images/banner/${i}.jpg`));
                    // this.bannerImg = i
                    canShake = true;
                }, 1000);
            }
        }
    },
    destroyed(){
        clearInterval(this.timer)
        this.timer = null
        $(window).off('scroll',this.scrollApp)
    }
};
</script>